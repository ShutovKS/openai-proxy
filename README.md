# OpenAI Proxy

[–ù–∞ —Ä—É—Å—Å–∫–æ–º](./README.md) | [English](./README.en.md) | [‰∏≠Êñá](./README.zh.md)

–ü—Ä–æ—Å—Ç–æ–π —Å–∞–º–æ—Ö–æ—Å—Ç—è—â–∏–π—Å—è –ø—Ä–æ–∫—Å–∏ –¥–ª—è OpenAI API.  
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å `https://api.openai.com` –Ω–∞ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã.

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

> –¢—Ä–µ–±—É–µ—Ç—Å—è: Linux, root-–¥–æ—Å—Ç—É–ø, Node.js (–µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

```bash
git clone https://github.com/ShutovKS/openai-proxy.git
cd openai-proxy
sudo ./setup.sh
````

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://<–≤–∞—à-ip>:<PORT>/v1
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ—Ä—Ç ‚Äî `4937`, –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `.env`.

---

## üß∞ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `setup.sh`

* –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Node.js –∏ npm
* –ö–æ–ø–∏—Ä—É–µ—Ç `.env.example` ‚Üí `.env` (–µ—Å–ª–∏ –Ω–µ—Ç)
* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `npm install`
* –°–æ–∑–¥–∞—ë—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç systemd-—Å–µ—Ä–≤–∏—Å `openai-proxy`
* –í–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã

---

## üõ† –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

```bash
git clone https://github.com/ShutovKS/openai-proxy.git
cd openai-proxy
cp .env.example .env   # –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ PORT –∏ API_URL –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
npm install
npm start
```

---

## üöÄ –†–µ–∂–∏–º—ã –∑–∞–ø—É—Å–∫–∞

* **npm start** ‚Äî –æ–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
* **npm run dev** ‚Äî —Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö (—á–µ—Ä–µ–∑ `nodemon`)

---

## üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–í –∫–ª–∏–µ–Ω—Ç–µ:

1. –ó–∞–º–µ–Ω–∏—Ç–µ base URL —Å `https://api.openai.com` ‚Üí `http://<your-host>:<PORT>/v1`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Authorization: Bearer <–≤–∞—à_–∫–ª—é—á_OpenAI>` –∫–∞–∫ –æ–±—ã—á–Ω–æ
3. –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ OpenAI API

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ `curl`:

```bash
curl http://127.0.0.1:4937/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_TOKEN" \
  -d '{
  "model": "gpt-4o",
  "messages": [
    {
      "role": "user",
      "content": "Write a one-sentence bedtime story about a unicorn."
    }
  ]
}'
```

---

## üßØ –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ systemd-—Å–µ—Ä–≤–∏—Å–∞:**

```bash
sudo systemctl status openai-proxy
```

**–õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:**

```bash
sudo journalctl -u openai-proxy -f
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**

```bash
sudo systemctl restart openai-proxy
```

---

## üìÅ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `.env`:

```dotenv
PORT=4937
API_URL=https://api.openai.com
```